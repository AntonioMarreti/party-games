/* === PREMIUM DARK MODE OVERRIDES === */

/* Base & Typography */
body.dark-mode {
    background-color: var(--bg-color);
    color: var(--text-dark);
}

/* Glass elements - Deep Slate Premium Look */
body.dark-mode .glass,
body.dark-mode .glass-card,
body.dark-mode .modal-content,
body.dark-mode .settings-card,
body.dark-mode .profile-card,
body.dark-mode .stats-card,
body.dark-mode .profile-stat-card,
body.dark-mode .lb-card,
body.dark-mode .game-card,
body.dark-mode .action-card,
body.dark-mode .empty-state-card,
body.dark-mode .empty-room-card,
body.dark-mode .results-card-container,
body.dark-mode .glass-modern-card,
body.dark-mode .stats-card-modern,
body.dark-mode .settings-group {
    background: var(--card-bg) !important;
    backdrop-filter: blur(25px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(25px) saturate(180%) !important;
    border: var(--glass-border) !important;
    color: var(--text-dark) !important;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5) !important;
}

/* Action Cards - Specific premium look */
body.dark-mode .action-card {
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%) !important;
    border: 1px solid rgba(255, 255, 255, 0.08) !important;
}

/* Navigation bar - No white lines */
body.dark-mode .bottom-nav {
    background: rgba(15, 23, 42, 0.95) !important;
    border-top: 1px solid rgba(255, 255, 255, 0.05) !important;
    box-shadow: none !important;
    outline: none !important;
}

body.dark-mode .nav-item {
    color: var(--text-hint);
}

body.dark-mode .nav-item.active {
    color: var(--primary-color) !important;
}

/* Popular Games & Horizontal Scrolls */
body.dark-mode .mini-game-card {
    background: rgba(30, 41, 59, 0.6) !important;
    border: 1px solid rgba(255, 255, 255, 0.08) !important;
}

body.dark-mode .mini-game-title {
    color: var(--text-dark) !important;
}

/* Text colors & Headings */
body.dark-mode h1,
body.dark-mode h2,
body.dark-mode h3,
body.dark-mode h4,
body.dark-mode h5,
body.dark-mode h6,
body.dark-mode .fw-bold,
body.dark-mode strong,
body.dark-mode .title-text,
body.dark-mode .cata-title,
body.dark-mode .trait-value,
body.dark-mode .kicked-name {
    color: var(--text-light) !important;
}

body.dark-mode .text-muted,
body.dark-mode small,
body.dark-mode .small,
body.dark-mode .subtitle-text,
body.dark-mode .cata-desc,
body.dark-mode .trait-sub,
body.dark-mode .trait-name {
    color: var(--text-hint) !important;
}

/* Forms & Inputs - Premium Dark Look */
body.dark-mode .form-control,
body.dark-mode input[type="text"],
body.dark-mode input[type="search"],
body.dark-mode textarea {
    background: rgba(15, 23, 42, 0.6) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    color: var(--text-dark) !important;
}

body.dark-mode .form-control:focus {
    border-color: var(--primary-color) !important;
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary-color), transparent 80%) !important;
}

/* Dropdowns & Pickers (Lobby Fix) */
body.dark-mode .dropdown-menu,
body.dark-mode #screen-room .dropdown-menu {
    background: #1e293b !important;
    backdrop-filter: blur(20px) !important;
    border: 1px solid rgba(255, 255, 255, 0.12) !important;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7) !important;
    border-radius: 20px !important;
}

body.dark-mode .dropdown-item,
body.dark-mode #screen-room .dropdown-item {
    color: var(--text-dark) !important;
    padding: 12px 20px !important;
    background: transparent !important;
}

body.dark-mode .dropdown-item:hover,
body.dark-mode .dropdown-item:active {
    background: rgba(255, 255, 255, 0.05) !important;
    color: #fff !important;
}

/* Close & Header Buttons */
body.dark-mode .btn-close,
body.dark-mode .close-btn,
body.dark-mode .modal-handle-close,
body.dark-mode .btn-back {
    filter: invert(1) brightness(2) !important;
    background: transparent !important;
    border: none !important;
}

/* === GAME MODULES === */

/* Blokus Premium Dark Blue */
body.dark-mode .blokus-wrapper,
body.dark-mode .blokus-board-container {
    background: #0f172a !important;
    /* Deep Navy */
}

body.dark-mode .blokus-header,
body.dark-mode .blokus-hand-area {
    background: rgba(15, 23, 42, 0.95) !important;
    border-color: rgba(255, 255, 255, 0.05) !important;
}

body.dark-mode .blokus-cell:not(.filled) {
    background: #1e293b !important;
    /* Slightly lighter navy */
}

body.dark-mode .blokus-board {
    background: #334155 !important;
    border: 2px solid #334155 !important;
}

body.dark-mode .blokus-modal-content {
    background: #0f172a !important;
    border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
}

body.dark-mode .blokus-piece-card {
    background: #1e293b !important;
}

body.dark-mode .capsule-filter {
    background: #1e293b !important;
}

body.dark-mode .filter-pill {
    background: #334155 !important;
}

/* Brain Battle */
body.dark-mode .bb-glass-card {
    background: var(--card-bg) !important;
    border-color: var(--border-color) !important;
}

body.dark-mode .bb-game-badge {
    background: #1e293b !important;
    color: var(--text-light) !important;
}

body.dark-mode .bb-round-btn,
body.dark-mode .bb-category-item {
    background: #1e293b !important;
    border-color: rgba(255, 255, 255, 0.05) !important;
}

/* Bunker & Who Am I */
body.dark-mode .theme-card,
body.dark-mode .voting-card,
body.dark-mode .bunker-card,
body.dark-mode .result-card {
    background: #1e293b !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
}

body.dark-mode .voting-avatar,
body.dark-mode .result-avatar {
    border-color: rgba(255, 255, 255, 0.1) !important;
}

/* === EXTRA UI FIXES (Audit results) === */

/* Profile Stat Cards */
body.dark-mode .stat-card,
body.dark-mode .profile-stat-card,
body.dark-mode .xp-card,
body.dark-mode .stats-card,
body.dark-mode .achievement-card,
body.dark-mode .profile-quick-stats {
    background: var(--card-bg) !important;
    border: var(--glass-border) !important;
    color: var(--text-dark) !important;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2) !important;
}

/* Menu items (Profile/Settings) */
body.dark-mode .menu-item,
body.dark-mode .list-group-item,
body.dark-mode .settings-card,
body.dark-mode .game-list-card {
    background: rgba(30, 41, 59, 0.6) !important;
    /* Slate 800ish */
    border: 1px solid rgba(255, 255, 255, 0.05) !important;
    color: var(--text-dark) !important;
}

body.dark-mode .menu-item:active,
body.dark-mode .list-group-item:active,
body.dark-mode .game-list-card:active {
    background: rgba(255, 255, 255, 0.05) !important;
}

/* Empty states */
body.dark-mode .empty-state-card,
body.dark-mode .empty-room-card {
    background: rgba(15, 23, 42, 0.5) !important;
    border: 1px dashed rgba(255, 255, 255, 0.1) !important;
    color: var(--text-hint) !important;
}

/* Tab switchers / Nav tabs */
body.dark-mode .nav-tabs,
body.dark-mode .nav-pills,
body.dark-mode .leaderboard-switch-container {
    background: rgba(15, 23, 42, 0.8) !important;
    border-radius: 50px !important;
    border: 1px solid rgba(255, 255, 255, 0.08) !important;
    padding: 6px !important;
}

/* Leaderboard Cards Refinement */
body.dark-mode .lb-card {
    background: rgba(30, 41, 59, 0.5) !important;
    border: 1px solid rgba(255, 255, 255, 0.05) !important;
    margin: 8px 15px !important;
    padding: 12px 18px !important;
    border-radius: 20px !important;
}

body.dark-mode .lb-name {
    color: var(--text-light) !important;
    font-weight: 600 !important;
}

body.dark-mode .lb-rank {
    background: rgba(51, 65, 85, 0.6) !important;
    color: var(--text-light) !important;
}

/* Profile XP & Color Grid */
body.dark-mode .profile-xp-text {
    color: #fbbf24 !important;
    /* Amber 400 */
    font-weight: 700 !important;
}

body.dark-mode .color-grid {
    background: rgba(15, 23, 42, 0.6) !important;
    border: var(--glass-border) !important;
    border-radius: 20px !important;
    padding: 15px !important;
}

/* Modern Search Input */
body.dark-mode .friends-search-input,
body.dark-mode #tab-games .search-bar {
    background: rgba(30, 41, 59, 0.8) !important;
    border: 1px solid rgba(255, 255, 255, 0.08) !important;
    border-radius: 16px !important;
    padding: 14px 20px !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2) !important;
}

/* Toggles & Switches */
body.dark-mode .form-check-input {
    background-color: rgba(51, 65, 85, 0.6) !important;
    border-color: rgba(255, 255, 255, 0.2) !important;
}

body.dark-mode .form-check-input:checked {
    background-color: var(--primary-color) !important;
    border-color: var(--primary-color) !important;
}

/* Room List Стекло */
body.dark-mode #public-rooms-list .card {
    background: rgba(30, 41, 59, 0.4) !important;
    backdrop-filter: blur(15px) !important;
}

body.dark-mode .nav-link:not(.active) {
    color: var(--text-hint) !important;
}

/* Bottom Nav - Clean edge */
body.dark-mode .bottom-nav {
    border-top: 1px solid rgba(255, 255, 255, 0.08) !important;
}

/* Badges and small text fixes */
body.dark-mode .badge.bg-light,
body.dark-mode .btn-light {
    background: rgba(51, 65, 85, 0.6) !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
    color: var(--text-dark) !important;
}

body.dark-mode .text-dark {
    color: var(--text-dark) !important;
}

body.dark-mode .stat-divider {
    background: rgba(255, 255, 255, 0.08) !important;
}

/* === BUNKER FULL COVERAGE === */
body.dark-mode .bunker-theme-wrapper {
    background: linear-gradient(to bottom, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.98)) !important;
    color: var(--text-dark) !important;
}

body.dark-mode .bunker-header-card,
body.dark-mode .bunker-footer-bar,
body.dark-mode .bunker-voting-screen,
body.dark-mode .bunker-reveal-overlay {
    background: rgba(15, 23, 42, 0.95) !important;
    backdrop-filter: blur(25px) !important;
    -webkit-backdrop-filter: blur(25px) !important;
    border-color: rgba(255, 255, 255, 0.05) !important;
}

body.dark-mode .bunker-trait-card,
body.dark-mode .catastrophe-section,
body.dark-mode .voting-target-btn,
body.dark-mode .survivor-item,
body.dark-mode .kicked-card,
body.dark-mode .bunker-reveal-card {
    background: #1e293b !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    color: var(--text-dark) !important;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3) !important;
}

body.dark-mode .bunker-round-badge {
    background: rgba(99, 102, 241, 0.1) !important;
    border-color: rgba(99, 102, 241, 0.3) !important;
}

body.dark-mode .bunker-places-badge {
    background: rgba(239, 68, 68, 0.1) !important;
    border-color: rgba(239, 68, 68, 0.3) !important;
}

/* === WHO AM I FIXES === */
body.dark-mode .theme-card {
    background: #1e293b !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
}

body.dark-mode .theme-card.selected {
    border-color: var(--primary-color) !important;
    background: rgba(51, 65, 85, 0.6) !important;
}

body.dark-mode .theme-icon {
    background: rgba(51, 65, 85, 0.4) !important;
}

body.dark-mode .btn-round-opt,
body.dark-mode .custom-round-input {
    background: rgba(30, 41, 59, 0.7) !important;
    border-color: rgba(255, 255, 255, 0.08) !important;
    color: white !important;
}

/* Modal and Lobby Specifics */
body.dark-mode #setup-screen,
body.dark-mode .lobby-setup-modal {
    background: #0f172a !important;
}

body.dark-mode .modal-body {
    background: transparent !important;
}

body.dark-mode .game-setting-card {
    background: #1e293b !important;
    border-color: rgba(255, 255, 255, 0.08) !important;
}

body.dark-mode .game-setting-icon {
    background: rgba(51, 65, 85, 0.4) !important;
}

/* Clean up Blokus "Dirty" areas */
body.dark-mode .blokus-board-container {
    background-color: #0f172a !important;
}

body.dark-mode .modal-handle-close {
    background: rgba(255, 255, 255, 0.4) !important;
    opacity: 0.8;
}